{"ast":null,"code":"import httpService from \"./httpServices\";\nimport { jwtDecode } from \"jwt-decode\";\nconst TOKEN_KEY = \"token\";\nrefreshTokenHeader();\nexport function refreshTokenHeader() {\n  httpService.setCommonHeader(\"x-auth-token\", getJWT());\n}\nexport function createUser(user) {\n  return httpService.post(\"/users\", user);\n}\nexport async function login(credentials) {\n  const response = await httpService.post(\"/users/login\", credentials);\n  localStorage.setItem(TOKEN_KEY, response);\n  refreshTokenHeader();\n}\nexport function logout() {\n  localStorage.removeItem(TOKEN_KEY);\n  refreshTokenHeader();\n}\nexport function getJWT() {\n  return localStorage.getItem(TOKEN_KEY);\n}\nexport function getUser() {\n  try {\n    const token = getJWT();\n    return jwtDecode(token);\n  } catch {\n    return null;\n  }\n}\nconst usersService = {\n  createUser,\n  login,\n  logout,\n  getUser,\n  getJWT\n};\nexport default usersService;","map":{"version":3,"names":["httpService","jwtDecode","TOKEN_KEY","refreshTokenHeader","setCommonHeader","getJWT","createUser","user","post","login","credentials","response","localStorage","setItem","logout","removeItem","getItem","getUser","token","usersService"],"sources":["Y:/Coding/bizCards/src/services/usersServices.js"],"sourcesContent":["import httpService from \"./httpServices\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nconst TOKEN_KEY = \"token\";\r\n\r\nrefreshTokenHeader();\r\n\r\nexport function refreshTokenHeader() {\r\n   httpService.setCommonHeader(\"x-auth-token\", getJWT());\r\n}\r\n\r\nexport function createUser(user) {\r\n   return httpService.post(\"/users\", user);\r\n}\r\n\r\nexport async function login(credentials) {\r\n   const response = await httpService.post(\"/users/login\", credentials);\r\n   localStorage.setItem(TOKEN_KEY, response);\r\n   refreshTokenHeader();\r\n}\r\n\r\nexport function logout() {\r\n   localStorage.removeItem(TOKEN_KEY);\r\n   refreshTokenHeader();\r\n}\r\n\r\nexport function getJWT() {\r\n   return localStorage.getItem(TOKEN_KEY);\r\n}\r\n\r\nexport function getUser() {\r\n   try {\r\n      const token = getJWT();\r\n      return jwtDecode(token);\r\n   } catch {\r\n      return null;\r\n   }\r\n}\r\n\r\nconst usersService = {\r\n   createUser,\r\n   login,\r\n   logout,\r\n   getUser,\r\n   getJWT,\r\n};\r\n\r\nexport default usersService;\r\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,gBAAgB;AACxC,SAASC,SAAS,QAAQ,YAAY;AAEtC,MAAMC,SAAS,GAAG,OAAO;AAEzBC,kBAAkB,CAAC,CAAC;AAEpB,OAAO,SAASA,kBAAkBA,CAAA,EAAG;EAClCH,WAAW,CAACI,eAAe,CAAC,cAAc,EAAEC,MAAM,CAAC,CAAC,CAAC;AACxD;AAEA,OAAO,SAASC,UAAUA,CAACC,IAAI,EAAE;EAC9B,OAAOP,WAAW,CAACQ,IAAI,CAAC,QAAQ,EAAED,IAAI,CAAC;AAC1C;AAEA,OAAO,eAAeE,KAAKA,CAACC,WAAW,EAAE;EACtC,MAAMC,QAAQ,GAAG,MAAMX,WAAW,CAACQ,IAAI,CAAC,cAAc,EAAEE,WAAW,CAAC;EACpEE,YAAY,CAACC,OAAO,CAACX,SAAS,EAAES,QAAQ,CAAC;EACzCR,kBAAkB,CAAC,CAAC;AACvB;AAEA,OAAO,SAASW,MAAMA,CAAA,EAAG;EACtBF,YAAY,CAACG,UAAU,CAACb,SAAS,CAAC;EAClCC,kBAAkB,CAAC,CAAC;AACvB;AAEA,OAAO,SAASE,MAAMA,CAAA,EAAG;EACtB,OAAOO,YAAY,CAACI,OAAO,CAACd,SAAS,CAAC;AACzC;AAEA,OAAO,SAASe,OAAOA,CAAA,EAAG;EACvB,IAAI;IACD,MAAMC,KAAK,GAAGb,MAAM,CAAC,CAAC;IACtB,OAAOJ,SAAS,CAACiB,KAAK,CAAC;EAC1B,CAAC,CAAC,MAAM;IACL,OAAO,IAAI;EACd;AACH;AAEA,MAAMC,YAAY,GAAG;EAClBb,UAAU;EACVG,KAAK;EACLK,MAAM;EACNG,OAAO;EACPZ;AACH,CAAC;AAED,eAAec,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}