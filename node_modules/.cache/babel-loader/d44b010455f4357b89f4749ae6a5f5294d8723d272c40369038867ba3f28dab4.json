{"ast":null,"code":"import _regeneratorRuntime from\"Y:/Coding/bizCards/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"Y:/Coding/bizCards/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"Y:/Coding/bizCards/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useContext}from\"react\";import{useState}from\"react\";import usersService from\"../services/usersServices\";import{jsx as _jsx}from\"react/jsx-runtime\";var fn_error_context_must_be_used=function fn_error_context_must_be_used(){throw new Error(\"must use authContext provider for consumer to work\");};export var authContext=/*#__PURE__*/createContext({user:null,login:fn_error_context_must_be_used,logout:fn_error_context_must_be_used,signUp:fn_error_context_must_be_used});export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(usersService.getUser()),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var refreshUser=function refreshUser(){return setUser(usersService.getUser());};var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return usersService.login(credentials);case 2:response=_context.sent;refreshUser();return _context.abrupt(\"return\",response);case 5:case\"end\":return _context.stop();}},_callee);}));return function login(_x){return _ref2.apply(this,arguments);};}();var logout=function logout(){usersService.logout();refreshUser();};return/*#__PURE__*/_jsx(authContext.Provider,{value:{user:user,login:login,logout:logout,signUp:usersService.createUser},children:children});};export var useAuth=function useAuth(){return useContext(authContext);};","map":{"version":3,"names":["createContext","useContext","useState","usersService","jsx","_jsx","fn_error_context_must_be_used","Error","authContext","user","login","logout","signUp","AuthProvider","_ref","children","_useState","getUser","_useState2","_slicedToArray","setUser","refreshUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","response","wrap","_callee$","_context","prev","next","sent","abrupt","stop","_x","apply","arguments","Provider","value","createUser","useAuth"],"sources":["Y:/Coding/bizCards/src/contexts/auth.context.jsx"],"sourcesContent":["import { createContext, useContext } from \"react\";\r\nimport { useState } from \"react\";\r\nimport usersService from \"../services/usersServices\";\r\n\r\nconst fn_error_context_must_be_used = () => {\r\n   throw new Error(\"must use authContext provider for consumer to work\");\r\n};\r\n\r\nexport const authContext = createContext({\r\n   user: null,\r\n   login: fn_error_context_must_be_used,\r\n   logout: fn_error_context_must_be_used,\r\n   signUp: fn_error_context_must_be_used,\r\n});\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n   const [user, setUser] = useState(usersService.getUser());\r\n\r\n   const refreshUser = () => setUser(usersService.getUser());\r\n\r\n   const login = async (credentials) => {\r\n      const response = await usersService.login(credentials);\r\n\r\n      refreshUser();\r\n\r\n      return response;\r\n   };\r\n\r\n   const logout = () => {\r\n      usersService.logout();\r\n      refreshUser();\r\n   };\r\n\r\n   return (\r\n      <authContext.Provider\r\n         value={{ user, login, logout, signUp: usersService.createUser }}\r\n      >\r\n         {children}\r\n      </authContext.Provider>\r\n   );\r\n};\r\nexport const useAuth = () => useContext(authContext);\r\n"],"mappings":"wUAAA,OAASA,aAAa,CAAEC,UAAU,KAAQ,OAAO,CACjD,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,GAAM,CAAAC,6BAA6B,CAAG,QAAhC,CAAAA,6BAA6BA,CAAA,CAAS,CACzC,KAAM,IAAI,CAAAC,KAAK,CAAC,oDAAoD,CAAC,CACxE,CAAC,CAED,MAAO,IAAM,CAAAC,WAAW,cAAGR,aAAa,CAAC,CACtCS,IAAI,CAAE,IAAI,CACVC,KAAK,CAAEJ,6BAA6B,CACpCK,MAAM,CAAEL,6BAA6B,CACrCM,MAAM,CAAEN,6BACX,CAAC,CAAC,CAEF,MAAO,IAAM,CAAAO,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACpC,IAAAC,SAAA,CAAwBd,QAAQ,CAACC,YAAY,CAACc,OAAO,CAAC,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAAjDP,IAAI,CAAAS,UAAA,IAAEE,OAAO,CAAAF,UAAA,IAEpB,GAAM,CAAAG,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,QAAS,CAAAD,OAAO,CAACjB,YAAY,CAACc,OAAO,CAAC,CAAC,CAAC,GAEzD,GAAM,CAAAP,KAAK,6BAAAY,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,WAAW,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACN,CAAA9B,YAAY,CAACO,KAAK,CAACiB,WAAW,CAAC,QAAhDC,QAAQ,CAAAG,QAAA,CAAAG,IAAA,CAEdb,WAAW,CAAC,CAAC,CAAC,OAAAU,QAAA,CAAAI,MAAA,UAEPP,QAAQ,0BAAAG,QAAA,CAAAK,IAAA,MAAAV,OAAA,GACjB,kBANK,CAAAhB,KAAKA,CAAA2B,EAAA,SAAAf,KAAA,CAAAgB,KAAA,MAAAC,SAAA,OAMV,CAED,GAAM,CAAA5B,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CAClBR,YAAY,CAACQ,MAAM,CAAC,CAAC,CACrBU,WAAW,CAAC,CAAC,CAChB,CAAC,CAED,mBACGhB,IAAA,CAACG,WAAW,CAACgC,QAAQ,EAClBC,KAAK,CAAE,CAAEhC,IAAI,CAAJA,IAAI,CAAEC,KAAK,CAALA,KAAK,CAAEC,MAAM,CAANA,MAAM,CAAEC,MAAM,CAAET,YAAY,CAACuC,UAAW,CAAE,CAAA3B,QAAA,CAE/DA,QAAQ,CACU,CAAC,CAE7B,CAAC,CACD,MAAO,IAAM,CAAA4B,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,QAAS,CAAA1C,UAAU,CAACO,WAAW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}