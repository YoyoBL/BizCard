{"ast":null,"code":"import _regeneratorRuntime from\"Y:/Coding/bizCards/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"Y:/Coding/bizCards/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import httpService from\"./httpServices\";import{jwtDecode}from\"jwt-decode\";var TOKEN_KEY=\"token\";refreshTokenHeader();export function refreshTokenHeader(){httpService.setCommonHeader(\"x-auth-token\",getJWT());}export function createUser(user){return httpService.post(\"/users\",user);}export function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return httpService.post(\"/users/login\",credentials);case 2:response=_context.sent;localStorage.setItem(TOKEN_KEY,response.data);refreshTokenHeader();return _context.abrupt(\"return\",response);case 6:case\"end\":return _context.stop();}},_callee);}));return _login.apply(this,arguments);}export function logout(){localStorage.removeItem(TOKEN_KEY);refreshTokenHeader();}export function getJWT(){return localStorage.getItem(TOKEN_KEY);}export function getUser(){try{var token=getJWT();return jwtDecode(token);}catch(_unused){return null;}}var usersService={createUser:createUser,login:login,logout:logout,getUser:getUser,getJWT:getJWT};export default usersService;","map":{"version":3,"names":["httpService","jwtDecode","TOKEN_KEY","refreshTokenHeader","setCommonHeader","getJWT","createUser","user","post","login","_x","_login","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","response","wrap","_callee$","_context","prev","next","sent","localStorage","setItem","data","abrupt","stop","logout","removeItem","getItem","getUser","token","_unused","usersService"],"sources":["Y:/Coding/bizCards/src/services/usersServices.js"],"sourcesContent":["import httpService from \"./httpServices\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nconst TOKEN_KEY = \"token\";\r\n\r\nrefreshTokenHeader();\r\n\r\nexport function refreshTokenHeader() {\r\n   httpService.setCommonHeader(\"x-auth-token\", getJWT());\r\n}\r\n\r\nexport function createUser(user) {\r\n   return httpService.post(\"/users\", user);\r\n}\r\n\r\nexport async function login(credentials) {\r\n   const response = await httpService.post(\"/users/login\", credentials);\r\n\r\n   localStorage.setItem(TOKEN_KEY, response.data);\r\n   refreshTokenHeader();\r\n   return response;\r\n}\r\n\r\nexport function logout() {\r\n   localStorage.removeItem(TOKEN_KEY);\r\n   refreshTokenHeader();\r\n}\r\n\r\nexport function getJWT() {\r\n   return localStorage.getItem(TOKEN_KEY);\r\n}\r\n\r\nexport function getUser() {\r\n   try {\r\n      const token = getJWT();\r\n      return jwtDecode(token);\r\n   } catch {\r\n      return null;\r\n   }\r\n}\r\n\r\nconst usersService = {\r\n   createUser,\r\n   login,\r\n   logout,\r\n   getUser,\r\n   getJWT,\r\n};\r\n\r\nexport default usersService;\r\n"],"mappings":"gOAAA,MAAO,CAAAA,WAAW,KAAM,gBAAgB,CACxC,OAASC,SAAS,KAAQ,YAAY,CAEtC,GAAM,CAAAC,SAAS,CAAG,OAAO,CAEzBC,kBAAkB,CAAC,CAAC,CAEpB,MAAO,SAAS,CAAAA,kBAAkBA,CAAA,CAAG,CAClCH,WAAW,CAACI,eAAe,CAAC,cAAc,CAAEC,MAAM,CAAC,CAAC,CAAC,CACxD,CAEA,MAAO,SAAS,CAAAC,UAAUA,CAACC,IAAI,CAAE,CAC9B,MAAO,CAAAP,WAAW,CAACQ,IAAI,CAAC,QAAQ,CAAED,IAAI,CAAC,CAC1C,CAEA,eAAsB,CAAAE,KAAKA,CAAAC,EAAA,SAAAC,MAAA,CAAAC,KAAA,MAAAC,SAAA,GAM1B,SAAAF,OAAA,EAAAA,MAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CANM,SAAAC,QAAqBC,WAAW,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACb,CAAAxB,WAAW,CAACQ,IAAI,CAAC,cAAc,CAAEU,WAAW,CAAC,QAA9DC,QAAQ,CAAAG,QAAA,CAAAG,IAAA,CAEdC,YAAY,CAACC,OAAO,CAACzB,SAAS,CAAEiB,QAAQ,CAACS,IAAI,CAAC,CAC9CzB,kBAAkB,CAAC,CAAC,CAAC,OAAAmB,QAAA,CAAAO,MAAA,UACdV,QAAQ,0BAAAG,QAAA,CAAAQ,IAAA,MAAAb,OAAA,GACjB,UAAAN,MAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,MAAO,SAAS,CAAAkB,MAAMA,CAAA,CAAG,CACtBL,YAAY,CAACM,UAAU,CAAC9B,SAAS,CAAC,CAClCC,kBAAkB,CAAC,CAAC,CACvB,CAEA,MAAO,SAAS,CAAAE,MAAMA,CAAA,CAAG,CACtB,MAAO,CAAAqB,YAAY,CAACO,OAAO,CAAC/B,SAAS,CAAC,CACzC,CAEA,MAAO,SAAS,CAAAgC,OAAOA,CAAA,CAAG,CACvB,GAAI,CACD,GAAM,CAAAC,KAAK,CAAG9B,MAAM,CAAC,CAAC,CACtB,MAAO,CAAAJ,SAAS,CAACkC,KAAK,CAAC,CAC1B,CAAE,MAAAC,OAAA,CAAM,CACL,MAAO,KAAI,CACd,CACH,CAEA,GAAM,CAAAC,YAAY,CAAG,CAClB/B,UAAU,CAAVA,UAAU,CACVG,KAAK,CAALA,KAAK,CACLsB,MAAM,CAANA,MAAM,CACNG,OAAO,CAAPA,OAAO,CACP7B,MAAM,CAANA,MACH,CAAC,CAED,cAAe,CAAAgC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}